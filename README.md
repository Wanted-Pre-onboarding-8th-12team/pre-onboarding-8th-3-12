# ë™ë£Œí•™ìŠµì„ í†µí•´ì„œ ì¸í„´ì‰½ ì„ ë°œ ê³¼ì œ Best Practice ë§Œë“¤ê¸°

## ğŸ“• ê°œìš”



### ê³¼ì œ ëª©í‘œ

> í•œêµ­ì„ìƒì •ë³´ ê²€ìƒ‰ì˜ì—­ í´ë¡ í•˜ê¸°

### ê¸°ê°„

2023.01.10 ~ 2023.01.13

---

## ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Members

|                                              ë¥˜ì§€ì°½                                              |                                             ë°•ì¤€í•˜                                              |                                             ë°±ê´‘ì²œ                                              |                                             ìœ ì œì›                                              |                                             ì •ì„¸ì—°                                              |                                             ì¡°ì˜ì¼                                              |
| :----------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------: |
| <img src="https://avatars.githubusercontent.com/u/104156381?s=70&v=4" width="100" height="100"/> | <img src="https://avatars.githubusercontent.com/u/85827017?s=70&v=4" width="100" height="100"/> | <img src="https://avatars.githubusercontent.com/u/82658528?s=70&v=4" width="100" height="100"/> | <img src="https://avatars.githubusercontent.com/u/96014828?s=70&v=4" width="100" height="100"/> | <img src="https://avatars.githubusercontent.com/u/79056677?s=70&v=4" width="100" height="100"/> | <img src="https://avatars.githubusercontent.com/u/86599495?s=70&v=4" width="100" height="100"/> |
|                           [RyuJiChang](https://github.com/RyuJiChang)                            |                            [harseille](https://github.com/harseille)                            |                             [back0202](https://github.com/back0202)                             |                               [LLSJYY](https://github.com/LLSJYY)                               |                               [n0eyes](https://github.com/n0eyes)                               |                            [young1the](https://github.com/young1the)                            |

---

## ğŸ–¥ Demo
gif ì‹œì—° ë‚´ìš© ì¶”ê°€

---

## âš¡ï¸ ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬

- react: 18.2.0
- styled-reset: 4.4.5
- styled-components: 5.3.6
- axios: 1.2.2
- typescript: 4.9.3
---

## âœ… ìš”êµ¬ ì‚¬í•­ ì²´í¬ë¦¬ìŠ¤íŠ¸

1. êµ¬í˜„ ì‚¬í•­

- [x] í•œêµ­ìƒì •ë³´ ê²€ìƒ‰ì˜ì—­ì„ í´ë¡ í•˜ê¸°
- [x] ì§ˆí™˜ëª… ê²€ìƒ‰ì‹œ API í˜¸ì¶œ í†µí•´ì„œ ê²€ìƒ‰ì–´ ì¶”ì²œ ê¸°ëŠ¥ êµ¬í˜„
  - [x] ì‚¬ìš©ìê°€ ì…ë ¥í•œ í…ìŠ¤íŠ¸ì™€ ì¼ì¹˜í•˜ëŠ” ë¶€ë¶„ ë³¼ë“œì²˜ë¦¬
  - [x] ê²€ìƒ‰ì–´ê°€ ì—†ì„ ì‹œ â€œê²€ìƒ‰ì–´ ì—†ìŒâ€ í‘œì¶œ
- [x] API í˜¸ì¶œ ìµœì í™”
  - [x] API í˜¸ì¶œë³„ë¡œ ë¡œì»¬ ìºì‹± êµ¬í˜„
    - [x] ìºì‹± ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ê¸ˆì§€(React-Query ë“±)
    - [x] ìºì‹±ì„ ì–´ë–»ê²Œ ê¸°ìˆ í–ˆëŠ”ì§€ì— ëŒ€í•œ ë‚´ìš© READMEì— ê¸°ìˆ 
  - [x] ì…ë ¥ë§ˆë‹¤ API í˜¸ì¶œí•˜ì§€ ì•Šë„ë¡ API í˜¸ì¶œ íšŸìˆ˜ë¥¼ ì¤„ì´ëŠ” ì „ëµ ìˆ˜ë¦½ ë° ì‹¤í–‰
    - [x] READMEì— ì „ëµì— ëŒ€í•œ ì„¤ëª… ê¸°ìˆ 
  - [x] APIë¥¼ í˜¸ì¶œí•  ë•Œ ë§ˆë‹¤ console.info("calling api") ì¶œë ¥ì„ í†µí•´ ì½˜ì†”ì°½ì—ì„œ API í˜¸ì¶œ íšŸìˆ˜ í™•ì¸ì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •
- [x] í‚¤ë³´ë“œë§Œìœ¼ë¡œ ì¶”ì²œ ê²€ìƒ‰ì–´ë“¤ë¡œ ì´ë™ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„
  - [x] ì‚¬ìš©ë²• READMEì— ê¸°ìˆ 
- [x] ì–¸ì–´ : JavaScript / TypeScript (ê°€ê¸‰ì  ì„ íƒ)
- [x] ì‚¬ìš©ê°€ëŠ¥í•œ ê¸°ìˆ 
  - [x] ì „ì—­ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬(Redux ë“±)
    - [x] ë‹¨, ìºì‹± ê¸°ëŠ¥ì´ í¬í•¨ë˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ ì œí•œ
  - [x] ìŠ¤íƒ€ì¼ ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬(styled-components, emotion, UI kit, tailwind, antd ë“±)
  - [x] HTTP Client(axios ë“±)

### ğŸ¥² Best PracticeëŠ” ì•„ë‹ˆì—ˆì§€ë§Œ ê³ ë¯¼í•œ ê²ƒê³¼ ê°œë°œ ë‚´ìš©

> ë‚´ìš©ì´ ë°©ëŒ€í•˜ì—¬ ì¶”ê°€ì ì¸ ë§í¬ë¡œ ì „ë‹¬ë“œë¦½ë‹ˆë‹¤.

- [ë¥˜ì§€ì°½ Trouble Shooting Log](https://www.notion.so/b53badc75edb4edc81c5990cb135efd0)
- [ë°•ì¤€í•˜ Trouble Shooting Log](https://www.notion.so/5dbd0179028240898238e0c8560a4f28)
- []

## ğŸ‘ Best Practice

Best PracticeëŠ” [ì˜ì¼](https://github.com/young1the)ë‹˜ì˜ ì½”ë“œë¥¼ ì„ ì •í–ˆìŠµë‹ˆë‹¤.

ì˜ì¼ë‹˜ì˜ ì½”ë“œì˜ íŠ¹ë³„í•œ ì ì„ ì•„ë˜ì— ì‚¬í•­ì— ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

### 1. ì…ë ¥í•œ í…ìŠ¤íŠ¸ì™€ ì¼ì¹˜í•˜ëŠ” ë¶€ë¶„ ë³¼ë“œì²˜ë¦¬

ìœ ì €ê°€ ê²€ìƒ‰í•œ ê°’ì¸ `value` ë¥¼ ê¸°ì¤€ìœ¼ë¡œ `split()` í•˜ì—¬ ë‚˜ëˆˆ ë¬¸ìì—´ ë°°ì—´ì„ `map()` ì„ ì´ìš©í•´ì„œ ë¶™ì´ëŠ” ë°©ë²•ìœ¼ë¡œ ë³¼ë“œì²˜ë¦¬ í–ˆìŠµë‹ˆë‹¤.

### 2. API í˜¸ì¶œ ìµœì í™”

#### 2-1. API í˜¸ì¶œë³„ë¡œ ë¡œì»¬ ìºì‹± êµ¬í˜„

```jsx
// in SearchWorker
async getSickInfos(query: string) {
  const Cache = new CacheStorage("sick");
  const cachedData = await Cache.match(query);
  if (cachedData) {
    return cachedData;
  }
	const params: TSickParams = { q: query };
  const requestedData = await getSickInfoByQueryString(params);
  Cache.put(query, requestedData);
  return requestedData;
}
```

`Request`ì™€ `Response`ë¥¼ ìŒìœ¼ë¡œ ì €ì¥í•  ìˆ˜ ìˆëŠ” `CacheStroage`ë¥¼ ì´ìš©í•´ì„œ apië¥¼ í˜¸ì¶œí•˜ê¸° ì „ì— ì´ë¯¸ ê°™ì€ `Request` ì— ëŒ€í•œ `Response` ê°€ ìˆëŠ” ì§€ í™•ì¸í•˜ê³ , `Request` ê°€ ì—†ì„ ë•Œì—ë§Œ `getSickInfoByQueryStrings` ë¥¼ í˜¸ì¶œí•´ì„œ apiìš”ì²­ì„ ë³´ë‚´ë„ë¡ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.

#### 2-2. ì…ë ¥ë§ˆë‹¤ API í˜¸ì¶œí•˜ì§€ ì•Šë„ë¡ API í˜¸ì¶œ íšŸìˆ˜ë¥¼ ì¤„ì´ëŠ” ì „ëµ ìˆ˜ë¦½ ë° ì‹¤í–‰

```jsx
useEffect(() => {
    let timer: NodeJS.Timeout;
    if (!value) setSearchState("None");
    else {
      timer = setTimeout(() => {
        search(value);
      }, delay);
    }
    return () => {
      if (timer) clearTimeout(timer);
    };
  }, [value]);
```

`<input/>`ì˜ value ê°’ì¸ `value`ê°€ ë°”ë€” ë•Œë§ˆë‹¤, `useEffect`ê°€ ì‹¤í–‰ë˜ê³ , `value`ê°€ ë¹ˆ ë¬¸ìì—´ì´ ì•„ë‹Œ ê²½ìš°ì—ëŠ” `setTimeout()` ì„ ì´ìš©í•´ì„œ `delay`ì´í›„ì— apië¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ ìºì‹±ëœ ê²°ê³¼ë¥¼ ë°›ì•„ì˜¤ëŠ” `search` í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë„ë¡ í–ˆê³  `value`ê°€ ë‹¤ì‹œ ë°”ë€Œì–´ì„œ ì¬ ë Œë”ë§ ë  ê²½ìš°ì— ì´ì „ì— ì„¤ì •ëœ `timer`ë¥¼ `clearTimeout()` í•´ì„œ **debounce** ì²˜ë¦¬ í–ˆìŠµë‹ˆë‹¤.

### 3. í‚¤ë³´ë“œë§Œìœ¼ë¡œ ì¶”ì²œ ê²€ìƒ‰ì–´ë“¤ë¡œ ì´ë™ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„

```jsx
const valueRef = useRef(value);
const [tabIndex, setTabIndex] = useState<number>(-1);
const onKeyDownHandler = useCallback(
    (ev: KeyboardEvent) => {
      if (result) {
        switch (ev.key) {
          case "ArrowDown":
            setTabIndex((prev) => 
							(prev === result?.length - 1 ? 0 : prev + 1));
            break;
          case "ArrowUp":
            setTabIndex((prev) => (prev === 0 ? -1 : prev - 1));
            break;
          case "Enter":
            alert(valueRef.current);
					// .....
        }
      }
    },
    [result, valueRef.current]
  );
```

`<SearchSection/>` ë‚´ë¶€ì— `tabIndex`ë¼ëŠ” ìƒíƒœê°’ì„ ë‘ê³ , `<input/>`ì˜ `onKeyDown`ì´ë²¤íŠ¸ë¡œ `tabIndex`ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë¥¼ ë„˜ê²¨ì£¼ì—ˆìŠµë‹ˆë‹¤. 

```jsx
result.map((ele, index) => { return
<SearchItem
	// ...props
	isFocused={index === tabIndex}
	focusValueRef={valueRef}
/> })
const SearchItem = (props) => {
	if (isFocused) focusValueRef.current = sickCd;
// ...
}
```

`<SearchItem/>` ì—ì„œ `tabIndex`ì™€ ìì‹ ì˜ indexê°’ì´ ê°™ì„ ë•Œ, `isFocused`ê°€ `true`ê°€ ë˜ê³  ì´ ê²½ìš°ì— `valueRef`ì— `sickCd`ë¥¼ ë‹´ì•„ì£¼ì–´ì„œ â€œEnterâ€í‚¤ê°€ ì…ë ¥ë˜ì—ˆì„ ë•Œ, í•´ë‹¹ `sickCd`ë¥¼ ì´ìš©í•´ì„œ `navigate()`ë˜ëŠ” modalì°½ì„ ë„ì›Œì£¼ëŠ” ë“±ì˜ ì‘ì—…ì„ í•  ìˆ˜ ìˆë„ë¡ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.

## ğŸ“ ë¬¸ì„œ
[íšŒì˜ë¡](https://absorbed-leek-405.notion.site/2-best-practice-9d77b76380b14b8d9357e07dd8e80e17)
